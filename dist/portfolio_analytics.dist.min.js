/*! portfolio_analytics - v0.0.1 (2016-10-06), Roman Rubsamen <roman.rubsamen@gmail.com> */var PortfolioAnalytics=PortfolioAnalytics||{};PortfolioAnalytics=function(a){function b(b){a.assertArray_(b);var d=c(b,0,b.length-1);return d[0]==-(1/0)?0:d[0]}function c(b,c,d){for(var e=-(1/0),f=-(1/0),g=-1,h=-1,i=-1,j=c;j<d+1;++j){a.assertPositiveNumber_(b[j]),b[j]>e&&(e=b[j],g=j);var k=(e-b[j])/e;k>f&&(f=k,h=g,i=j)}return[f,h,i]}function d(b){var c=-(1/0);a.assertArray_(b);for(var d=new Array(b.length),e=0;e<b.length;++e)a.assertPositiveNumber_(b[e]),b[e]>c&&(c=b[e]),d[e]=(c-b[e])/c;return d}function e(b,d){if(a.assertArray_(b),a.assertPositiveInteger_(d),0==d)return[];var e=[],f=[];for(f.push([0,b.length-1,d]);0!=f.length;){var g=f.pop(),h=g[0],i=g[1],j=g[2],k=c(b,h,i),l=k[1],m=k[2],n=k[0];0!=n&&n!=-(1/0)&&e.push([n,l,m]),1==j||l==h&&m==i||(l==h&&m<i?f.push([m,i,j-1]):l>h&&m==i?f.push([h,l,j-1]):(f.push([h,l,j-1]),f.push([m,i,j-1])))}return e.sort(function(a,b){var c=a[0],d=b[0];if(c<d)return 1;if(c>d)return-1;var e=a[1],f=b[1];return e<f?-1:1}),e.slice(0,Math.min(d,e.length))}function f(b){a.assertArray_(b);for(var c=d(b),e=0,f=0;f<c.length;++f)e+=c[f]*c[f];var g=Math.sqrt(e/c.length);return g}function g(b){a.assertArray_(b);for(var c=d(b),e=0,f=0;f<c.length;++f)e+=c[f];var g=e/c.length;return g}function h(b,c){a.assertArray_(b),a.assertBoundedNumber_(c,0,1);var e=d(b);if(e.sort(function(a,b){return a-b}),1==alpha)return e[e.length-1];for(var f=1;alpha>f/e.length;)++f;for(var g=e[f-1],h=f/e.length,i=(h-alpha)*g,j=0,k=f;k<e.length;++k)j+=e[k];j/=e.length;var l=(i+j)/(1-alpha);return l}return a.maxDrawdown=function(a){return b(a)},a.drawdownFunction=function(a){return d(a)},a.topDrawdowns=function(a,b){return e(a,b)},a.ulcerIndex=function(a){return f(a)},a.painIndex=function(a){return g(a)},a.conditionalDrawdown=function(a,b){return h(a,b)},a}(PortfolioAnalytics||{});var PortfolioAnalytics=PortfolioAnalytics||{};PortfolioAnalytics=function(a){function b(a){if(Object.prototype.toString.call(a).indexOf("Array")==-1)throw new Error("input must be an array")}function c(a){if("[object Number]"!=Object.prototype.toString.call(a)||isNaN(a)||a===1/0||a===-(1/0))throw new Error("input must be a number")}function d(a){try{c(a)}catch(b){throw new Error("input must be a positive number")}if(a<0)throw new Error("input must be a positive number")}function e(a,b,d){try{c(a),c(b),c(d)}catch(e){throw new Error("input(s) must be a number")}if(a<b||a>d)throw new Error("input must be bounded between "+b+" and "+d)}function f(a){try{d(a)}catch(b){throw new Error("input must be a positive integer")}if(Math.floor(a)!==a)throw new Error("input must be a positive integer")}return a.assertArray_=function(a){return b(a)},a.assertNumber_=function(a){return c(a)},a.assertPositiveNumber_=function(a){return d(a)},a.assertBoundedNumber_=function(a,b,c){return e(a,b,c)},a.assertPositiveInteger_=function(a){return f(a)},a}(PortfolioAnalytics||{});